<%= form_for(@operation) do |f| %>
<% if @operation.errors.any? %>
<div id="error_explanation">
	<h2><%= pluralize(@operation.errors.count, "error") %> prohibited this operation from being saved:</h2>

	<ul>
		<% @operation.errors.full_messages.each do |message| %>
		<li><%= message %></li>
		<% end %>
	</ul>
</div>
<% end %>

<br>
<br>
<form class="form-horizontal" role="form">
	<div class="form-group">
		<%= f.label :value, class: "control-label col-sm-2" %>
		
		<div class="col-sm-10">
			<%= f.text_field :value, class: "form-control", placeholder: "Digite o valor da operação",  
			id:"valor", onKeyPress: "return(FormataReais(this,'.',',',event))" %>
		</div>

	</div>
	<br><br>

	<div class="form-group">
		<%= f.label :retrieve_account_id, "Para onde vai", class: "control-label col-sm-2" %><br>
		<div class="col-sm-10">
			<%= f.collection_select :retrieve_account_id, AnalyticAccount.all, :id, :name , {}, {class: "simple-test"} %>
		</div>
	</div>

	<br><br>

	<div class="form-group">
		<%=  f.label :release_account_id, "De onde vem", class: "control-label col-sm-2" %><br>
		<div class="col-sm-10">
			<%= f.collection_select :release_account_id, AnalyticAccount.all, :id, :name , {}, {class: "simple-test"} %>
		</div>
	</div>

	<br><br>

	<div class="form-group darmargen">
		<%= f.label :description, class: "control-label col-sm-2" %>
		<div class="col-sm-10">
			<%= f.text_area :description, class: "form-control", placeholder: "Digite a descrição da operação" %>
		</div>
	</div>

	<br><br>

	<div class="form-group">
		<%= f.label :release_date, class: "control-label col-sm-2" %>
		<div class="col-sm-10">
			<%= f.date_select :release_date, class: "form-control", placeholder: "Digite a descrição da operação" %>

		</div>
	</div>

	<br><br>
	<div class="form-group">
		<div class="col-sm-offset-2 col-sm-10">
			<%= f.submit class: "btn btn-default" %>
		</div>
	</div>
</form>


		<script type="text/javascript">
			function FormataReais(fld, milSep, decSep, e) {
			var sep = 0;
			var key = '';
			var i = j = 0;
			var len = len2 = 0;
			var strCheck = '0123456789';
			var aux = aux2 = '';
			var whichCode = (window.Event) ? e.which : e.keyCode;
      	   if (whichCode == 13) return true;
			 key = String.fromCharCode(whichCode);  // Valor para o código da Chave
			     if (strCheck.indexOf(key) == -1) return false;  // Chave inválida
			         len = fld.value.length;
			             for(i = 0; i < len; i++)
			                 if ((fld.value.charAt(i) != '0') && (fld.value.charAt(i) != decSep)) break;
			                     aux = '';
			                         for(; i < len; i++)
			                             if (strCheck.indexOf(fld.value.charAt(i))!=-1) aux += fld.value.charAt(i);
			                             aux += key;
			                         len = aux.length;
		                         if (len == 0) fld.value = '';
			                 if (len == 1) fld.value = '0'+ decSep + '0' + aux;
		                 if (len == 2) fld.value = '0'+ decSep + aux;
		             if (len > 2) {
	          	aux2 = '';
		          for (j = 0, i = len - 3; i >= 0; i--) {
	              	if (j == 3) {
		              	aux2 += milSep;
		                  	j = 0;
			                         }
		                              	aux2 += aux.charAt(i);
		                                  j++;
			                          }
		                          	fld.value = '';
	                          	len2 = aux2.length;
			                 for (i = len2 - 1; i >= 0; i--)
		                 fld.value += aux2.charAt(i);
		             fld.value += decSep + aux.substr(len - 2, len);
			     	}
		      	return false;
					}
			//Fim da Função FormataReais -->
			</script>
<% end %>
